# 프로젝트 주요 지침

- 문서 관련은 docs/ 디렉토리를 참조하세요.

## 동시성 이슈 문서화 규칙

새로운 비즈니스 로직을 작성하거나 검토할 때, 동시성 문제가 발생할 수 있는 경우 반드시 문서화해야 합니다.

### 문서 위치
- `docs/{도메인명}/CONCURRENCY.md`
- 예: `docs/account/CONCURRENCY.md`, `docs/transaction/CONCURRENCY.md`

### 문서 작성 형식
각 동시성 이슈는 다음 형식으로 기록:

```markdown
## {기능명} ({메서드명})

### {이슈 번호}. {이슈 제목}

**문제점:**
- 구체적인 문제 설명

**해결 방안:**
- 권장 해결책

**상태:** 미해결 / 해결됨
```

### 기록해야 할 동시성 이슈 유형
- Race Condition
- Double Submit (중복 요청)
- Lost Update
- Deadlock 가능성
- DB Lock 관련 이슈
- 분산 환경에서의 동시성 문제

### 우선순위 테이블
각 문서 하단에 우선순위 요약 테이블 포함:

| 문제 | 우선순위 | 해결책 | 상태 |
|------|---------|--------|------|
| ... | 높음/중간/낮음 | ... | 미해결/해결됨 |

## docs 문서 업데이트 규칙

docs/ 디렉토리에 문서가 추가되거나 수정되면, README.md의 "상세 문서" 섹션도 함께 업데이트해야 합니다.

### README.md 업데이트 항목
- 새로운 도메인 문서 추가 시: 해당 도메인 링크 추가
- 문서 삭제 시: 해당 링크 제거
- 문서 구조 변경 시: README 반영

### 문서 링크 형식
```markdown
## 상세 문서

| 도메인 | 문서 | 설명 |
|--------|------|------|
| Account | [동시성 이슈](docs/account/create-account/CONCURRENCY.md) | 계좌 관련 동시성 문제 |
```

## 작업 로그 규칙

Claude와 함께 트러블슈팅, 문제점 확인 및 개선, 리팩토링 작업을 진행할 때 작업 내용을 로그로 기록합니다.

### 로그 파일 위치
- `docs/logs/{YYYY-MM-DD}.log`
- 예: `docs/logs/2025-12-28.log`

### 로그 작성 시점
- 대화 세션에서 의미있는 작업(트러블슈팅, 리팩토링, 버그 수정 등)이 완료되었을 때
- 사용자가 요청할 때
- 대화 세션이 종료되기 전

### 로그 작성 형식
```markdown
# 작업 로그 - {YYYY-MM-DD}

## 작업 요약

{작업 내용 한 줄 요약}

---

## 1. {이슈 제목}

### 기존 코드
```kotlin
{문제가 있던 코드}
```

### 문제점
- {구체적인 문제 설명}

### 해결
- {해결 방법}

---

## 변경된 파일

| 파일 | 변경 내용 |
|------|----------|
| `파일명.kt` | 변경 설명 |

---

## 최종 코드

```kotlin
{리팩토링된 최종 코드}
```

---

## 교훈

1. {배운 점}
2. {배운 점}
```

### 로그 기록 원칙
- 각 이슈는 **기존 코드 → 문제점 → 해결** 구조로 작성
- 코드 블록은 반드시 포함하여 나중에 참조 가능하도록
- 변경된 파일 목록 명시
- 최종 코드와 교훈 포함